<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <title>Editor de Imagenes</title>
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  
  <meta property="og:title" content="">
	<meta property="og:type" content="website">
	<meta property="og:url" content="">
	<meta property="og:site_name" content="">
	<meta property="og:description" content="">

  <!-- Styles -->
  <link rel="stylesheet" href="css/font-awesome.min.css">
  <link rel="stylesheet" href="css/animate.css">
  <link href='https://fonts.googleapis.com/css?family=Raleway:400,100,200,300,500,600,700,800,900|Montserrat:400,700' rel='stylesheet' type='text/css'>
  

  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/main.css">

  <script src="js/modernizr-2.7.1.js"></script>
  
</head>

<body>

    
    <div class="navbar navbar-inverse navbar-fixed-top" style="z-index: 99 !important">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="logo" href="index.html"><p style="font-size: 20px; color: #fff">Logo</p></a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#inicio" class="scroll">Inicio</a></li>
          </ul>
        </div><!--/.navbar-collapse -->
      </div>
    </div>
        
    <header>
      <div class="container">
        <div class="row">
          <div class="col-xs-6">
            <a href="index.html"><p style="font-size: 50px; color: #fff">Logo</p></a>
          </div>
          <div class="col-xs-6 signin text-right navbar-nav">
            <a href="#inicio" class="scroll">Inicio</a>&nbsp; &nbsp;
          </div>
        </div>
        
        
      </div>
    </header>
    
    <!--<div class="mouse-icon hidden-xs">
				<div class="scroll"></div>
      </div>-->
      
    <!--
      Notificaciones del sitio web

    -->

    <!-- Modal -->
    <div class="modal fade" id="notificacion" role="dialog">
      <div class="modal-dialog" style="z-index: 999999999">
      
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Alerta del sitio web</h4>
          </div>
          <div class="modal-body">
            <p id="contenido"></p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Cerrar</button>
          </div>
        </div>
        
      </div>
    </div>
      
    <section id="inicio" class="pad-sm">
	    <div class="container">
        <div class="row">
            <h2 style="color: #333; text-align: center">Selecciona un Formato</h2>
        </div>
		    <div class="row pad-sm">

			    <div class="col-md-3 col-sm-6 wow fadeIn" data-wow-delay="0.4s">

            <img src="img/archivo.svg" class="imagen-formato"/>

				    <hr class="line purple">
            <h4 class="center-text"><strong>Formato:</strong><br> 235 x 320 mm</h4>
            <h4 class="center-text"><strong>Borde:</strong><br> 20 mm</h4>
            <h4 class="center-text"><strong>Aréa de edición:</strong> <br>195 x 280 mm</h4>
            <button onClick="abrirFormato(this)" id="formato1" name="formato1" class="btn btn-primary" style="margin-top: 10px; text-align:center">Seleccionar</button>
          </div>

			    <div class="col-md-3 col-sm-6 wow fadeIn" data-wow-delay="0.8s">

            <img src="img/archivo.svg" class="imagen-formato" />

				    <hr  class="line blue">
            <h4 class="center-text"><strong>Formato:</strong><br> 170 x 320 mm</h4>
            <h4 class="center-text"><strong>Borde:</strong><br> 17 mm</h4>
            <h4 class="center-text"><strong>Aréa de edición:</strong> <br>136 x 286 mm</h4>
            <button onClick="abrirFormato(this)"  id="formato2" name="formato2" class="btn btn-primary" style="margin-top: 10px; text-align:center">Seleccionar</button>
          </div>

			    <div class="col-md-3 col-sm-6 wow fadeIn" data-wow-delay="1.2s">

            <img src="img/archivo.svg" class="imagen-formato" />

				    <hr  class="line yellow">
            <h4 class="center-text"><strong>Formato:</strong><br> 235 x 235 mm</h4>
            <h4 class="center-text"><strong>Borde:</strong><br> 20 mm</h4>
            <h4 class="center-text"><strong>Aréa de edición:</strong> <br>195 x 195 mm</h4>
            <button onClick="abrirFormato(this)"  id="formato3" name="formato3" class="btn btn-primary" style="margin-top: 10px; text-align:center">Seleccionar</button>
          </div>
          
          <div class="col-md-3 col-sm-6 wow fadeIn" data-wow-delay="1.2s">

              <img src="img/archivo.svg" class="imagen-formato" />

              <hr  class="line red">
              <h4 class="center-text"><strong>Formato:</strong><br> 170 x 230 mm</h4>
              <h4 class="center-text"><strong>Borde:</strong><br> 17 mm</h4>
              <h4 class="center-text"><strong>Aréa de edición:</strong> <br>136 x 296 mm</h4>
              <button onClick="abrirFormato(this)"  id="formato4" name="formato4" class="btn btn-primary" style="margin-top: 10px; text-align:center">Seleccionar</button>
            </div>
        </div>
    </section>
        
    <footer>
      <div class="container">
        
        <div class="row">
          <div class="col-sm-8 margin-20">
            <ul class="list-inline social">
              <li>Redes Sociales</li>
              <li><a href="#"><i class="fa fa-twitter"></i></a></li>
              <li><a href="#"><i class="fa fa-facebook"></i></a></li>
              <li><a href="#"><i class="fa fa-instagram"></i></a></li>
            </ul>
          </div>
          
          <div class="col-sm-4 text-right">
            <p><small>Copyright &copy; 2017.<br>
	            Creado por <a href="http://crossware.co">Crossware Solutions SAS</a></small></p>
          </div>
        </div>
        
      </div>
    </footer>
    
    
    <!-- Javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.0.min.js"><\/script>')</script>
    <script src="js/wow.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/blockUI.js" ></script>
    <!-- Ideally before closing body tag -->
    <script data-preload="true" data-path="http://dev.crossware.co/imagen-editor/editor" src="editor/pixie-integrate.js"></script>

    <script>
  
        function abrirFormato(formato){

          var tipo_formato = formato.id;
          var input;

          var myPixie = Pixie.setOptions({
              replaceOriginal: true,
              appendTo: 'body',
              onError: function(err) {
                  myPixie.close();
                  notificar(err.message);
                  
              },
              onSave: function(data, img, name, email) {

                  $.ajax({
                      type: 'POST',
                      url: 'http://dev.crossware.co/imagen-editor/funciones/guardar-imagen.php',
                      cache: false,
                      data: { imgData: data, tipo_formato: tipo_formato, nombre: name, email: email},
                      beforeSend:function() {
            
                        $.blockUI({ 
                            
                            message: '<img src="img/loader.gif" style="margin:auto; display:block;width: 60%" />',
                            css: { 
                                textAlign:      'center', 
                                color:          '#333', 
                                border:         '0px solid #aaa', 
                                backgroundColor:'transparent', 
                                cursor:         'wait' 
                            }, 
                            // styles for the overlay 
                            overlayCSS:  { 
                                backgroundColor: '#fff', 
                                 opacity:         0.6,
                                cursor:          'wait' 
                            }, 
                        }
                        ); 
                        
                      },
                      success:function(data) {
                                
                        var json = JSON.parse(data);
    
                        if (json.code == "1") {
    
                           notificar("Hemos enviado tu diseño al email");
            
                        } else if(json.code == "2"){

                          notificar("Debe ingresar un Email destinatario");

                        }else{
                            
                            notificar("Ocurrio un error enviando la imagen, intentalo de nuevo");
                                                
                        }
                    

                        $.unblockUI();
              
                      }
                  });
              }
          });

          switch (formato.id) {
                    case "formato1":
                      
                    myPixie.open({
                        url: "http://dev.crossware.co/imagen-editor/img/formatos/formato01.jpg"
                    });

                        break;
                    case "formato2":
                        
                    myPixie.open({
                        url: "http://dev.crossware.co/imagen-editor/img/formatos/formato02.jpg"
                    });
                    
                        break;
                    
                    case "formato3":
                        
                    myPixie.open({
                        url: "http://dev.crossware.co/imagen-editor/img/formatos/formato03.jpg"
                    });
                    
                        break;

                    case "formato4":
                        
                    myPixie.open({
                        url: "http://dev.crossware.co/imagen-editor/img/formatos/formato04.jpg"
                    });
                    
                        break;
                
                    default:

                    myPixie.open({
                      url: "http://dev.crossware.co/imagen-editor/img/formatos/formato01.jpg"
                  });

                        break; 
          

        }

      }

      function notificar(texto){

        document.getElementById("contenido").innerHTML = texto;

        $("#notificacion").modal();

      }
      

    </script>

    </body>
</html>